---
import { useTranslations, type Lang } from '@/i18n'

// Destructure the properties from Astro.props
const { pageTitle } = Astro.props

const t = useTranslations(Astro.currentLocale as Lang)
// Define TypeScript interface for the properties
interface Props {
	pageTitle: string
}
---

<div class="hs-dropdown relative inline-flex [--auto-close:inside]">
	<button
		id="hs-blog-article-share-dropdown"
		type="button"
		class="hs-dropdown-toggle flex items-center gap-x-2 text-sm text-gray-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none dark:text-neutral-400 dark:hover:text-neutral-200 dark:focus:text-neutral-200"
		aria-haspopup="menu"
		aria-expanded="false"
		aria-label="Dropdown"
	>
		<svg
			class="size-4 shrink-0"
			xmlns="http://www.w3.org/2000/svg"
			width="24"
			height="24"
			viewBox="0 0 24 24"
			fill="none"
			stroke="currentColor"
			stroke-width="2"
			stroke-linecap="round"
			stroke-linejoin="round"
			><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline
				points="16 6 12 2 8 6"></polyline><line
				x1="12"
				x2="12"
				y1="2"
				y2="15"
			></line></svg
		>
		{
			t({
				en: 'Share',
				ar: 'يشارك',
				es: 'Compartir',
				fr: 'Partager',
				hi: 'शेयर करना',
				id: 'Membagikan',
				ms: 'Kongsi',
				th: 'แบ่งปัน',
				vi: 'Chia sẻ',
				bn: 'শেয়ার করুন',
				'zh-cn': '分享',
				'pt-br': 'Compartilhar'
			})
		}
	</button>
	<div
		class="hs-dropdown-menu duration z-10 mb-1 hidden w-56 rounded-xl bg-gray-900 p-2 opacity-0 shadow-md transition-[opacity,margin] hs-dropdown-open:opacity-100 dark:bg-black"
		role="menu"
		aria-orientation="vertical"
		aria-labelledby="hs-blog-article-share-dropdown"
	>
		<div class="">
			<button
				type="button"
				class="js-clipboard flex w-full items-center gap-x-3.5 rounded-lg px-3 py-2 text-sm text-gray-400 hover:bg-white/10 focus:bg-white/10 focus:outline-none dark:text-neutral-400 dark:hover:bg-neutral-900 dark:focus:bg-neutral-900"
				data-clipboard-success-text={t({
					en: 'Copied',
					ar: 'تم النسخ',
					es: 'Copiado',
					fr: 'Copié',
					hi: 'कॉपी किया गया',
					id: 'Disalin',
					ms: 'Disalin',
					th: 'คัดลอกแล้ว',
					vi: 'Đã sao chép',
					bn: 'কপি হয়েছে',
					'zh-cn': '已复制',
					'pt-br': 'Copiado'
				})}
			>
				<svg
					class="js-clipboard-default h-4 w-4 transition group-hover:rotate-6"
					width="24"
					height="24"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				>
					<rect
						width="8"
						height="4"
						x="8"
						y="2"
						rx="1"
						ry="1"
					></rect>
					<path
						d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"
					></path>
				</svg>

				<svg
					class="js-clipboard-success hidden h-4 w-4 text-neutral-300"
					width="24"
					height="24"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				>
					<polyline points="20 6 9 17 4 12"></polyline>
				</svg>
				<span class="js-clipboard-success-text">
					{
						t({
							en: 'Copy link',
							ar: 'نسخ الرابط',
							es: 'Copiar enlace',
							fr: 'Copier le lien',
							hi: 'लिंक कॉपी करें',
							id: 'Salin tautan',
							ms: 'Salin pautan',
							th: 'คัดลอกลิงก์',
							vi: 'Sao chép liên kết',
							bn: 'লিংক কপি করুন',
							'zh-cn': '复制链接',
							'pt-br': 'Copiar link'
						})
					}
				</span>
			</button>
		</div>
		<div class="my-2 border-t border-gray-600 dark:border-neutral-800"></div>
		<a
			class="flex items-center gap-x-3.5 rounded-lg px-3 py-2 text-sm text-gray-400 hover:bg-white/10 focus:bg-white/10 focus:outline-none dark:text-neutral-400 dark:hover:bg-neutral-900 dark:focus:bg-neutral-900"
			target="_blank"
			href={`https://twitter.com/home/?status=${pageTitle}${Astro.url}`}
		>
			<svg
				class="size-4 shrink-0"
				xmlns="http://www.w3.org/2000/svg"
				width="16"
				height="16"
				fill="currentColor"
				viewBox="0 0 16 16"
			>
				<path
					d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"
				></path>
			</svg>
			{
				t({
					en: 'Share on Twitter',
					ar: 'شارك على تويتر',
					es: 'Compartir en Twitter',
					fr: 'Partager sur Twitter',
					hi: 'ट्विटर पर साझा करें',
					id: 'Bagikan di Twitter',
					ms: 'Kongsi di Twitter',
					th: 'แชร์บน Twitter',
					vi: 'Chia sẻ trên Twitter',
					bn: 'টুইটারে শেয়ার করুন',
					'zh-cn': '在 Twitter 上分享',
					'pt-br': 'Compartilhe no Twitter'
				})
			}
		</a>
		<a
			class="flex items-center gap-x-3.5 rounded-lg px-3 py-2 text-sm text-gray-400 hover:bg-white/10 focus:bg-white/10 focus:outline-none dark:text-neutral-400 dark:hover:bg-neutral-900 dark:focus:bg-neutral-900"
			href={`https://www.facebook.com/share.php?u=${Astro.url}&t=${pageTitle}`}
			target="_blank"
		>
			<svg
				class="size-4 shrink-0"
				xmlns="http://www.w3.org/2000/svg"
				width="16"
				height="16"
				fill="currentColor"
				viewBox="0 0 16 16"
			>
				<path
					d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"
				></path>
			</svg>
			{
				t({
					en: 'Share on Facebook',
					ar: 'مشاركة على فيسبوك',
					es: 'Compartir en Facebook',
					fr: 'Partager sur Facebook',
					hi: 'फेसबुक पर साझा करें',
					id: 'Bagikan di Facebook',
					ms: 'Kongsi di Facebook',
					th: 'แชร์บน Facebook',
					vi: 'Chia sẻ trên Facebook',
					bn: 'ফেসবুকে শেয়ার করুন',
					'zh-cn': '在 Facebook 上分享',
					'pt-br': 'Compartilhar no Facebook'
				})
			}
		</a>
		<a
			class="flex items-center gap-x-3.5 rounded-lg px-3 py-2 text-sm text-gray-400 hover:bg-white/10 focus:bg-white/10 focus:outline-none dark:text-neutral-400 dark:hover:bg-neutral-900 dark:focus:bg-neutral-900"
			target="_blank"
			href={`https://www.linkedin.com/shareArticle?mini=true&url=${Astro.url}&title=${pageTitle}`}
		>
			<svg
				class="size-4 shrink-0"
				xmlns="http://www.w3.org/2000/svg"
				width="16"
				height="16"
				fill="currentColor"
				viewBox="0 0 16 16"
			>
				<path
					d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"
				></path>
			</svg>
			{
				t({
					en: 'Share on LinkedIn',
					ar: 'مشاركة على لينكد إن',
					es: 'Compartir en LinkedIn',
					fr: 'Partager sur LinkedIn',
					hi: 'लिंक्डइन पर साझा करें',
					id: 'Bagikan di LinkedIn',
					ms: 'Kongsi di LinkedIn',
					th: 'แชร์บน LinkedIn',
					vi: 'Chia sẻ trên LinkedIn',
					bn: 'লিঙ্কডইনে শেয়ার করুন',
					'zh-cn': '在 LinkedIn 上分享',
					'pt-br': 'Compartilhar no LinkedIn'
				})
			}
		</a>
	</div>
</div>

<!--Import the necessary Dropdown and Clipboard plugins-->
<!-- https://clipboardjs.com/ -->
<script>
	import ClipboardJS from 'clipboard'

	// Initialization of Clipboard
	;(function () {
		window.addEventListener('load', () => {
			const clipboards = document.querySelectorAll<HTMLElement>('.js-clipboard')

			clipboards.forEach((el) => {
				const clipboard = new ClipboardJS(el, {
					text: () => {
						return window.location.href
					}
				})

				clipboard.on('success', () => {
					const defaultElement = el.querySelector<HTMLElement>('.js-clipboard-default')
					const successElement = el.querySelector<HTMLElement>('.js-clipboard-success')
					const successTextElement = el.querySelector<HTMLElement>(
						'.js-clipboard-success-text'
					)
					const successText = el.dataset.clipboardSuccessText || ''
					let oldSuccessText: string | undefined

					if (successTextElement) {
						oldSuccessText = successTextElement.textContent || ''
						successTextElement.textContent = successText
					}

					if (defaultElement && successElement) {
						defaultElement.style.display = 'none'
						successElement.style.display = 'block'
					}

					setTimeout(() => {
						if (successTextElement && oldSuccessText !== undefined) {
							successTextElement.textContent = oldSuccessText
						}

						if (defaultElement && successElement) {
							successElement.style.display = ''
							defaultElement.style.display = ''
						}
					}, 800)
				})
			})
		})
	})()
</script>
